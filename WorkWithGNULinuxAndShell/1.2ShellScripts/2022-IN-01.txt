Зад. 50 2022-IN-01
Както знаете, при отваряне на файл с редактора vi, той създава в същата директория временен файл
с име в следния формат: точка, името на оригиналния файл, точка, swp. Например, при редактиране
на файл с име foo.txt ще се създаде временен файл с име .foo.txt.swp.
Напишете shell скрипт, който приема два задължителни позиционни аргумента – имена на директории. Примерно извикване: ./foo.sh ./dir1 /path/to/dir2/
В dir1 може да има файлове/директории, директорията dir2 трябва да е празна.
Скриптът трябва да копира всички обикновенни файлове от dir1 (и нейните под-директории) в dir2,
запазвайки директорийната структура, но без да копира временните файлове, създадени от редактора
vi (по горната дефиниция).
Забележка: За удобство приемаме, че не ни вълнува дали метаданните на обектите (owner, group,
permissions, etc.) ще се запазят.
Примерни обекти:
dir1/
dir1/a
dir1/.a.swp
dir1/b
dir1/c/d
dir1/c/.bar.swp
Обекти след изпълнението:
dir2/
dir2/a
dir2/b
dir2/c/d
dir2/c/.bar.swp


  1 #!/bin/bash
  2
  3 [[ "$#" -ne 2 ]] && echo "Invalid cnt args! Must be 2!">&2 && exit 1
  4
  5 src="$1"
  6 dst="$2"
  7
  8 [[ ! -d "$1" ]] && echo "Argument $1 must be directory to proceed!">&2 && exit 2
  9 [[ ! -d "$2" ]] && echo "Argument $2 must be directory to proceed!">&2 && exit 3
 10
 11 find "$src" -mindepth 1 -maxdepth 1 | while read -r filepath; do
 12     filename="${filepath##*/}"
 13     [[ ! "$filename" =~ ^\..*\.swp$ ]] && mv "$filepath" "$dst"
 14 done
